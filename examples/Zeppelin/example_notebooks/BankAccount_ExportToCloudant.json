{"paragraphs":[{"text":"%sh\n\n# renew kerberos ticket - this is only required for\n# enterprise clusters\n\n# if kinit command exists (i.e. enterprise cluster), run it\nif type \"kinit\" &> /dev/null; \nthen \n   echo 'running kinit...'; \n   kinit -k -t $USER.keytab $USER@IBM.COM\nfi","dateUpdated":"2016-08-28T10:01:11+0000","config":{"tableHide":false,"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1472378471949_1343606435","id":"20160827-075358_3904599","dateCreated":"2016-08-28T10:01:11+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:213"},{"text":"%sh\n\n# Load an public domain financial data set\n# More info on the data set including data dictionary is here:\n# http://lisp.vse.cz/pkdd99/Challenge/berka.htm\n\n# only create the directory if it doesn't already exist\n[[ -d data_berka ]] || mkdir data_berka\ncd data_berka\nwget http://lisp.vse.cz/pkdd99/DATA/data_berka.zip\nunzip data_berka.zip\ncd ..\nrm -rf data_berka\n\nhdfs dfs -mkdir financial_data\nhdfs dfs -put *.asc financial_data/\n\necho \"Verifying datafiles have been uploaded to hdfs:\"\nhdfs dfs -ls financial_data/","dateUpdated":"2016-08-28T10:01:11+0000","config":{"tableHide":false,"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1472378471951_1344375933","id":"20160827-074633_287311183","dateCreated":"2016-08-28T10:01:11+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:214","focus":true},{"text":"%pyspark\n\n# set credentials for your cloudant database\n\ncl_username = \"<<changeme>>\"\ncl_password = \"<<changeme>>\"\ncl_hostname = \"<<changeme>>\"\ncl_database = \"financials\"\n\n# imports\n\nfrom __future__ import print_function\nimport time\nimport sys\nfrom operator import add\nfrom pyspark import SparkContext\nfrom pyspark.sql import SQLContext\nimport getpass\n\n# now the main code\n\nsqlContext = SQLContext(sc)\n\naccount_filename = \"hdfs:///user/{0}/financial_data/account.asc\".format(getpass.getuser())\n\naccount_df = sqlContext.read.format('com.databricks.spark.csv') \\\n                .options(header='true', inferschema='true', delimiter=';') \\\n                .load(account_filename)\n\n# Write the data to Cloudant\naccount_df.write.format(\"com.cloudant.spark\") \\\n    .option(\"cloudant.host\",cl_hostname) \\\n    .option(\"cloudant.username\",cl_username) \\\n    .option(\"cloudant.password\",cl_password) \\\n    .save(cl_database)\n\nprint(\"Account data has been saved to https://{0}/{1}\".format(cl_hostname, cl_database))","dateUpdated":"2016-08-30T20:21:46+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1472378471952_1354764153","id":"20160827-195906_622875973","dateCreated":"2016-08-28T10:01:11+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:219","dateFinished":"2016-08-30T20:10:16+0000","dateStarted":"2016-08-30T20:10:15+0000","focus":true},{"dateUpdated":"2016-08-28T10:01:11+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1472378471952_1354764153","id":"20160828-092915_466994136","dateCreated":"2016-08-28T10:01:11+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:220"}],"name":"Bank Account - Export to Cloudant","id":"2BU4QPA7M","angularObjects":{"2BU1N24HU:shared_process":[],"2BWBA8P8K:shared_process":[],"2BWS3WQST:shared_process":[],"2BVV7X28J:shared_process":[],"2BWUC62JF:shared_process":[],"2BVKEUC1F:shared_process":[],"2BVX31FEC:shared_process":[],"2BUMM9UPJ:shared_process":[],"2BTV3KJC4:shared_process":[],"2BX5GZHRH:shared_process":[],"2BWJ78H4R:shared_process":[],"2BTN48V7M:shared_process":[],"2BUW36DRD:shared_process":[],"2BT9QR9S7:shared_process":[],"2BWZ3TZED:shared_process":[],"2BWANZZ3V:shared_process":[],"2BTW2QKSR:shared_process":[]},"config":{"looknfeel":"default"},"info":{}}