{"paragraphs":[{"title":"get data into hfs","text":"%sh\n\n# Get data file\nwget --no-check-certificate https://community.watsonanalytics.com/wp-content/uploads/2015/04/WA_Fn-UseC_-Sales-Win-Loss.csv\n\n# Put data in HDFS\nhdfs dfs -mkdir /tmp/zeppelin\nhdfs dfs -put WA_Fn-UseC_-Sales-Win-Loss.csv /tmp/zeppelin/data-set.csv\n\n# Change permission so bigsql process can access the files\nhdfs dfs -chmod 777 /tmp/zeppelin\nhdfs dfs -chmod 777 /tmp/zeppelin/data-set.csv\n\n# Check file is there\nhdfs dfs -ls /tmp/zeppelin","dateUpdated":"2016-08-06T01:36:42+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sh","tableHide":true,"editorHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470447045317_298080953","id":"20160806-013045_138889876","dateCreated":"2016-08-06T01:30:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:172","dateFinished":"2016-08-06T01:32:27+0000","dateStarted":"2016-08-06T01:32:01+0000","result":{"code":"SUCCESS","type":"TEXT","msg":"Found 2 items\ndrwxrwxrwx   - bigsql  bihdfs          0 2016-08-06 01:13 /tmp/zeppelin/._biginsights_stats\n-rwxrwxrwx   3 biadmin bihdfs    8895213 2016-08-06 01:07 /tmp/zeppelin/data-set.csv\n"}},{"title":"create external table","text":"%jdbc(bigsql)\n\ncreate external hadoop table if not exists sales (\n    OpportunityNumber integer,\n    SuppliesSubgroup varchar(30),\n    SuppliesGroup varchar(30),\n    Region varchar(30),\n    RouteToMarket varchar(50),\n    ElapsedDaysInSalesStage integer,\n    OpportunityResult varchar(30),\n    SalesStageChangeCount integer,\n    TotalDaysIdentifiedThroughClosing integer,\n    TotalDaysIdentifiedThroughQualified integer,\n    OpportunityAmountUSD integer,\n    ClientSizeByRevenue integer,\n    ClientSizeByEmployeeCount integer,\n    RevenueFromClientPastTwoYears integer,\n    CompetitorType varchar(30),\n    RatioDaysIdentifiedToTotalDays decimal,\n    RatioDaysValidatedToTotalDays decimal,\n    RatioDaysQualifiedToTotalDays decimal,\n    DealSizeCategory integer\n) row format delimited \n  fields terminated by ',' \n  lines terminated by '\\n' \n  location '/tmp/zeppelin'\n","dateUpdated":"2016-08-06T01:36:59+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","tableHide":true,"editorHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470447045317_298080953","id":"20160806-013045_876926999","dateCreated":"2016-08-06T01:30:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:173","dateFinished":"2016-08-06T01:32:05+0000","dateStarted":"2016-08-06T01:32:01+0000","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]}},{"title":"Average Opportunity by Region and Supply Group","text":"%jdbc(bigsql)\n\nselect region, suppliesgroup, avg(opportunityamountusd) as \"OpportunityAmount\"\nfrom sales\nwhere region <> 'Region'\ngroup by region, suppliesgroup","dateUpdated":"2016-08-06T01:36:20+0000","config":{"colWidth":12,"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[{"name":"REGION","index":0,"aggr":"sum"}],"values":[{"name":"OpportunityAmount","index":2,"aggr":"sum"}],"groups":[{"name":"SUPPLIESGROUP","index":1,"aggr":"sum"}],"scatter":{"xAxis":{"name":"REGION","index":0,"aggr":"sum"},"yAxis":{"name":"SUPPLIESGROUP","index":1,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/scala","tableHide":false,"title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470447045318_299235200","id":"20160806-013045_366919281","dateCreated":"2016-08-06T01:30:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:174","dateFinished":"2016-08-06T01:33:34+0000","dateStarted":"2016-08-06T01:33:34+0000","result":{"code":"SUCCESS","type":"TABLE","msg":"REGION\tSUPPLIESGROUP\tOpportunityAmount\nMid-Atlantic\tPerformance & Non-auto\t100725\nNortheast\tCar Accessories\t88451\nNortheast\tPerformance & Non-auto\t102391\nNortheast\tTires & Wheels\t107380\nNorthwest\tCar Electronics\t124914\nPacific\tCar Accessories\t101309\nPacific\tCar Electronics\t165159\nPacific\tPerformance & Non-auto\t108249\nPacific\tTires & Wheels\t172870\nSoutheast\tCar Accessories\t89915\nMid-Atlantic\tCar Electronics\t30584\nMidwest\tCar Accessories\t77097\nMidwest\tCar Electronics\t76911\nMidwest\tPerformance & Non-auto\t93321\nNorthwest\tCar Accessories\t92877\nNorthwest\tPerformance & Non-auto\t103314\nSouthwest\tCar Accessories\t89160\nMid-Atlantic\tCar Accessories\t71541\nMid-Atlantic\tTires & Wheels\t112181\nMidwest\tTires & Wheels\t90870\nNortheast\tCar Electronics\t66721\nNorthwest\tTires & Wheels\t155239\nSoutheast\tCar Electronics\t77457\nSoutheast\tPerformance & Non-auto\t98606\nSoutheast\tTires & Wheels\t98364\nSouthwest\tCar Electronics\t69912\nSouthwest\tPerformance & Non-auto\t93975\nSouthwest\tTires & Wheels\t136857\n","comment":"","msgTable":[[{"key":"SUPPLIESGROUP","value":"Mid-Atlantic"},{"key":"SUPPLIESGROUP","value":"Performance & Non-auto"},{"key":"SUPPLIESGROUP","value":"100725"}],[{"key":"OpportunityAmount","value":"Northeast"},{"key":"OpportunityAmount","value":"Car Accessories"},{"key":"OpportunityAmount","value":"88451"}],[{"value":"Northeast"},{"value":"Performance & Non-auto"},{"value":"102391"}],[{"value":"Northeast"},{"value":"Tires & Wheels"},{"value":"107380"}],[{"value":"Northwest"},{"value":"Car Electronics"},{"value":"124914"}],[{"value":"Pacific"},{"value":"Car Accessories"},{"value":"101309"}],[{"value":"Pacific"},{"value":"Car Electronics"},{"value":"165159"}],[{"value":"Pacific"},{"value":"Performance & Non-auto"},{"value":"108249"}],[{"value":"Pacific"},{"value":"Tires & Wheels"},{"value":"172870"}],[{"value":"Southeast"},{"value":"Car Accessories"},{"value":"89915"}],[{"value":"Mid-Atlantic"},{"value":"Car Electronics"},{"value":"30584"}],[{"value":"Midwest"},{"value":"Car Accessories"},{"value":"77097"}],[{"value":"Midwest"},{"value":"Car Electronics"},{"value":"76911"}],[{"value":"Midwest"},{"value":"Performance & Non-auto"},{"value":"93321"}],[{"value":"Northwest"},{"value":"Car Accessories"},{"value":"92877"}],[{"value":"Northwest"},{"value":"Performance & Non-auto"},{"value":"103314"}],[{"value":"Southwest"},{"value":"Car Accessories"},{"value":"89160"}],[{"value":"Mid-Atlantic"},{"value":"Car Accessories"},{"value":"71541"}],[{"value":"Mid-Atlantic"},{"value":"Tires & Wheels"},{"value":"112181"}],[{"value":"Midwest"},{"value":"Tires & Wheels"},{"value":"90870"}],[{"value":"Northeast"},{"value":"Car Electronics"},{"value":"66721"}],[{"value":"Northwest"},{"value":"Tires & Wheels"},{"value":"155239"}],[{"value":"Southeast"},{"value":"Car Electronics"},{"value":"77457"}],[{"value":"Southeast"},{"value":"Performance & Non-auto"},{"value":"98606"}],[{"value":"Southeast"},{"value":"Tires & Wheels"},{"value":"98364"}],[{"value":"Southwest"},{"value":"Car Electronics"},{"value":"69912"}],[{"value":"Southwest"},{"value":"Performance & Non-auto"},{"value":"93975"}],[{"value":"Southwest"},{"value":"Tires & Wheels"},{"value":"136857"}]],"columnNames":[{"name":"REGION","index":0,"aggr":"sum"},{"name":"SUPPLIESGROUP","index":1,"aggr":"sum"},{"name":"OpportunityAmount","index":2,"aggr":"sum"}],"rows":[["Mid-Atlantic","Performance & Non-auto","100725"],["Northeast","Car Accessories","88451"],["Northeast","Performance & Non-auto","102391"],["Northeast","Tires & Wheels","107380"],["Northwest","Car Electronics","124914"],["Pacific","Car Accessories","101309"],["Pacific","Car Electronics","165159"],["Pacific","Performance & Non-auto","108249"],["Pacific","Tires & Wheels","172870"],["Southeast","Car Accessories","89915"],["Mid-Atlantic","Car Electronics","30584"],["Midwest","Car Accessories","77097"],["Midwest","Car Electronics","76911"],["Midwest","Performance & Non-auto","93321"],["Northwest","Car Accessories","92877"],["Northwest","Performance & Non-auto","103314"],["Southwest","Car Accessories","89160"],["Mid-Atlantic","Car Accessories","71541"],["Mid-Atlantic","Tires & Wheels","112181"],["Midwest","Tires & Wheels","90870"],["Northeast","Car Electronics","66721"],["Northwest","Tires & Wheels","155239"],["Southeast","Car Electronics","77457"],["Southeast","Performance & Non-auto","98606"],["Southeast","Tires & Wheels","98364"],["Southwest","Car Electronics","69912"],["Southwest","Performance & Non-auto","93975"],["Southwest","Tires & Wheels","136857"]]},"focus":true},{"dateUpdated":"2016-08-06T01:35:37+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470447045318_299235200","id":"20160806-013045_1712543816","dateCreated":"2016-08-06T01:30:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:175","dateFinished":"2016-08-06T01:32:33+0000","dateStarted":"2016-08-06T01:32:01+0000","result":{"code":"SUCCESS","type":"TEXT","msg":""}},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1470447045318_299235200","id":"20160806-013045_1412607476","dateCreated":"2016-08-06T01:30:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:176","dateUpdated":"2016-08-06T01:35:37+0000","dateFinished":"2016-08-06T01:32:33+0000","dateStarted":"2016-08-06T01:32:03+0000","result":{"code":"SUCCESS","type":"TEXT","msg":""}}],"name":"Big SQL Test","id":"2BU9BX95D","angularObjects":{"2BSRHUK37:shared_process":[],"2BTHTZGHV:shared_process":[],"2BUFX8W19:shared_process":[],"2BS8PYM3S:shared_process":[],"2BRMMRGDW:shared_process":[],"2BSBYVXPE:shared_process":[],"2BS7SNZHZ:shared_process":[],"2BV8KVJ7W:shared_process":[],"2BRS75P8B:shared_process":[],"2BRNAK8VN:shared_process":[],"2BTCVA7WH:shared_process":[],"2BSSHJPCD:shared_process":[],"2BV1NBVDT:shared_process":[],"2BUGD6JM6:shared_process":[],"2BSTAJ1QR:shared_process":[],"2BSJ13QTF:shared_process":[],"2BTX3CPC7:shared_process":[]},"config":{"looknfeel":"default"},"info":{}}